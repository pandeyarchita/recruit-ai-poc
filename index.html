<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recruit-AI â€“ Screening POC</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7fb; margin:0; padding:0; }
    .container { max-width: 900px; margin: 40px auto; background:#fff; padding:24px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); }
    h1 { margin-top:0; }
    textarea, input[type=file] { width:100%; margin:10px 0; padding:12px; border-radius:8px; border:1px solid #ccc; }
    button { padding:12px 20px; border:none; border-radius:8px; background:#4f46e5; color:#fff; font-size:16px; cursor:pointer; }
    button:disabled { background:#999; }
    .results { margin-top:24px; padding:16px; background:#f1f5f9; border-radius:10px; }
    .badge { display:inline-block; padding:6px 10px; border-radius:999px; background:#e0e7ff; color:#3730a3; font-weight:bold; }
    ul { margin:8px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Recruit-AI â€“ Resume Screening Demo</h1>
    <p>Upload a Job Description and a Resume to see the AI recruiterâ€™s analysis.</p>

    <label><strong>Job Description</strong></label>
    <textarea id="jd" rows="6" placeholder="Paste the Job Description here..."></textarea>

    <label><strong>Resume (paste text for POC)</strong></label>
    <textarea id="resume" rows="6" placeholder="Paste the resume text here..."></textarea>

    <button id="analyzeBtn">Analyze Candidate</button>

    <div id="results" class="results" style="display:none;">
      <h2>AI Analysis</h2>
      <p><strong>Match Score:</strong> <span class="badge" id="score"></span></p>
      <p><strong>Summary:</strong> <span id="summary"></span></p>
      <p><strong>Recommended Action:</strong> <span id="action"></span></p>
      <p><strong>Strengths:</strong></p>
      <ul id="strengths"></ul>
      <p><strong>Gaps:</strong></p>
      <ul id="gaps"></ul>
    </div>
  </div>

  <script>
    const btn = document.getElementById('analyzeBtn');
    const resultsDiv = document.getElementById('results');

    btn.addEventListener('click', async () => {
      const jd = document.getElementById('jd').value;
      const resume = document.getElementById('resume').value;

      if (!jd || !resume) {
        alert('Please provide both Job Description and Resume text.');
        return;
      }

      btn.disabled = true;
      btn.innerText = 'Analyzing...';

      // ðŸ”¹ MOCK RESPONSE (use this if backend not connected yet)
      // Replace this block with the fetch() call below when n8n is ready
      const mockResponse = {
        score: 81,
        summary: 'Strong backend profile with relevant experience; minor gaps in cloud exposure.',
        strengths: ['Python', 'API Development', '4+ years experience'],
        gaps: ['AWS', 'Docker'],
        recommended_action: 'Interview'
      };

      renderResults(mockResponse);

      /* ðŸ”¹ REAL BACKEND INTEGRATION (n8n webhook)
      const response = await fetch('https://YOUR_N8N_URL/webhook/recruit-ai/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          job_description: jd,
          resume_text: resume
        })
      });

      const data = await response.json();
      renderResults(data);
      */

      btn.disabled = false;
      btn.innerText = 'Analyze Candidate';
    });

    function renderResults(data) {
      document.getElementById('score').innerText = data.score + '/100';
      document.getElementById('summary').innerText = data.summary;
      document.getElementById('action').innerText = data.recommended_action;

      const strengthsUl = document.getElementById('strengths');
      strengthsUl.innerHTML = '';
      data.strengths.forEach(s => {
        const li = document.createElement('li');
        li.innerText = s;
        strengthsUl.appendChild(li);
      });

      const gapsUl = document.getElementById('gaps');
      gapsUl.innerHTML = '';
      data.gaps.forEach(g => {
        const li = document.createElement('li');
        li.innerText = g;
        gapsUl.appendChild(li);
      });

      resultsDiv.style.display = 'block';
    }
  </script>
</body>
</html>
