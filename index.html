<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recruit-AI – Screening POC</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7fb; margin:0; padding:0; }
    .container { max-width: 900px; margin: 40px auto; background:#fff; padding:24px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.08); }
    h1 { margin-top:0; }
    textarea, input[type=file] { width:100%; margin:10px 0; padding:12px; border-radius:8px; border:1px solid #ccc; }
    button { padding:12px 20px; border:none; border-radius:8px; background:#4f46e5; color:#fff; font-size:16px; cursor:pointer; }
    button:disabled { background:#999; }
    .results { margin-top:24px; padding:16px; background:#f1f5f9; border-radius:10px; }
    .badge { display:inline-block; padding:6px 10px; border-radius:999px; background:#e0e7ff; color:#3730a3; font-weight:bold; }
    ul { margin:8px 0; }
    .error { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Recruit-AI – Resume Screening Demo</h1>
    <p>Upload a Job Description and a Resume to see the AI recruiter’s analysis.</p>

    <label><strong>Job Description</strong></label>
    <textarea id="jd" rows="6" placeholder="Paste the Job Description here..."></textarea>

    <label><strong>Resume (paste text for POC)</strong></label>
    <textarea id="resume" rows="6" placeholder="Paste the resume text here..."></textarea>

    <button id="analyzeBtn">Analyze Candidate</button>
    <p id="errorMsg" class="error" style="display:none;"></p>

    <div id="results" class="results" style="display:none;">
      <h2>AI Analysis</h2>
      <p><strong>Match Score:</strong> <span class="badge" id="score"></span></p>
      <p><strong>Summary:</strong> <span id="summary"></span></p>
      <p><strong>Recommended Action:</strong> <span id="action"></span></p>
      <p><strong>Strengths:</strong></p>
      <ul id="strengths"></ul>
      <p><strong>Gaps:</strong></p>
      <ul id="gaps"></ul>
    </div>
  </div>

  <script>
    const btn = document.getElementById('analyzeBtn');
    const resultsDiv = document.getElementById('results');
    const errorMsg = document.getElementById('errorMsg');

    btn.addEventListener('click', async () => {
      const jd = document.getElementById('jd').value.trim();
      const resume = document.getElementById('resume').value.trim();

      if (!jd || !resume) {
        showError('Please provide both Job Description and Resume text.');
        return;
      }

      hideError();
      btn.disabled = true;
      btn.innerText = 'Analyzing...';

      try {
        const analysis = analyzeResume(jd, resume);
        renderResults(analysis);
      } catch (error) {
        showError('Analysis failed. Please try again.');
        console.error(error);
      }

      btn.disabled = false;
      btn.innerText = 'Analyze Candidate';
    });

    function analyzeResume(jobDescription, resumeText) {
      // Simple AI-inspired analysis (rule-based with keyword matching)
      // In a real app, replace with an LLM API call (e.g., to xAI or OpenAI)

      const jdLower = jobDescription.toLowerCase();
      const resumeLower = resumeText.toLowerCase();

      // Extract keywords from JD (basic parsing)
      const jdSkills = extractSkills(jdLower);
      const resumeSkills = extractSkills(resumeLower);

      // Calculate match score (0-100) based on skill overlap and experience
      const matchedSkills = jdSkills.filter(skill => resumeSkills.includes(skill));
      const skillScore = (matchedSkills.length / jdSkills.length) * 60; // 60% weight on skills
      const experienceScore = extractExperience(resumeLower) >= 3 ? 30 : 15; // 30% weight on experience (assume 3+ years needed)
      const relevanceScore = calculateRelevance(jdLower, resumeLower) * 10; // 10% weight on overall relevance
      const score = Math.min(100, Math.round(skillScore + experienceScore + relevanceScore));

      // Strengths and Gaps
      const strengths = matchedSkills.slice(0, 5); // Top 5 matches
      const gaps = jdSkills.filter(skill => !resumeSkills.includes(skill)).slice(0, 5); // Top 5 missing

      // Summary and Action
      let summary = '';
      let action = '';
      if (score >= 80) {
        summary = 'Excellent match with strong alignment in skills and experience.';
        action = 'Interview';
      } else if (score >= 60) {
        summary = 'Good potential, but some gaps in required skills.';
        action = 'Consider for Interview';
      } else {
        summary = 'Moderate match; significant gaps may require training.';
        action = 'Reject or Hold';
      }

      return {
        score,
        summary,
        strengths,
        gaps,
        recommended_action: action
      };
    }

    function extractSkills(text) {
      // Basic skill extraction (expand with a real NLP library)
      const commonSkills = ['python', 'javascript', 'java', 'aws', 'docker', 'kubernetes', 'sql', 'api', 'react', 'node.js', 'machine learning', 'data analysis'];
      return commonSkills.filter(skill => text.includes(skill));
    }

    function extractExperience(text) {
      // Rough experience extraction (looks for years)
      const match = text.match(/(\d+)\+?\s*years?/i);
      return match ? parseInt(match[1]) : 0;
    }

    function calculateRelevance(jd, resume) {
      // Simple relevance score based on word overlap
      const jdWords = jd.split(/\s+/);
      const resumeWords = resume.split(/\s+/);
      const overlap = jdWords.filter(word => resumeWords.includes(word)).length;
      return Math.min(1, overlap / jdWords.length);
    }

    function renderResults(data) {
      document.getElementById('score').innerText = data.score + '/100';
      document.getElementById('summary').innerText = data.summary;
      document.getElementById('action').innerText = data.recommended_action;

      const strengthsUl = document.getElementById('strengths');
      strengthsUl.innerHTML = '';
      data.strengths.forEach(s => {
        const li = document.createElement('li');
        li.innerText = s;
        strengthsUl.appendChild(li);
      });

      const gapsUl = document.getElementById('gaps');
      gapsUl.innerHTML = '';
      data.gaps.forEach(g => {
        const li = document.createElement('li');
        li.innerText = g;
        gapsUl.appendChild(li);
      });

      resultsDiv.style.display = 'block';
    }

    function showError(message) {
      errorMsg.innerText = message;
      errorMsg.style.display = 'block';
    }

    function hideError() {
      errorMsg.style.display = 'none';
    }
  </script>
</body>
</html>
